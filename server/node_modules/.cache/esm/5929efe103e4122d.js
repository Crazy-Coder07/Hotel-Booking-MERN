let User;_03e‍.x([["createConnectAccount",()=>createConnectAccount]]);_03e‍.w("../models/user",[["default",["User"],function(v){User=v}]]);
const stripe = require('stripe')(process.env.STRIPE_SECRET);

       const createConnectAccount=async (req,res)=>{

    // user is not defind in express-jwt version 6 or more
    //  so instesd of using the user please use  auth(READ DOCUMENTATION PROPERLY)

if (!req.auth || !req.auth._id) {
  console.error('Invalid user or user ID');
}

// finding the user from the database
const auth = await User.findById(req.auth._id).exec();
  _03e‍.g.console.log("USER ===>",auth);

// if user don't have stripe_account_id yet then create now
// official doc follows the customer as a name
let customer;
if(!auth.stripe_account_id){
    stripe.customers.create({
        email: 'adityaranjan7479@gmail.com',
     })
        .then(customer => _03e‍.g.console.log(customer))
        .catch(error => _03e‍.g.console.error(error));

      auth.stripe_account_id=customer.id;
      await auth.save();
}

 
};

